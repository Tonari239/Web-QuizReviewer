<?php

require_once __DIR__ . '/../common-models/question.php';

class CSVParser
{  
    public static function extract(string $filePath): array
    {

        if (!file_exists($filePath)) 
        {
			throw new Exception("CSV file not found");
		}

        $questions = [];
        $handle = fopen($filePath, "r");
        while (($row = fgetcsv($handle)) !== FALSE) 
        {
            $q = new Question();
            $q->text = $row[0];
            $q->answers = array_slice($row,1,4);
            $q->correct = $row[5];
            $q->points = (int)$row[6];
            $questions[] = $q;
        }
        fclose($handle);
        return $questions;
    }
    
}

